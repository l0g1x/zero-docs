---
title: Basic Concepts
---

Zero applications have three primary schema components:

| schema.ts            | Description                                                                   |
| -------------------- | ----------------------------------------------------------------------------- |
| **Tables & Columns** | Your main data tables / column definitions.                                   |
| **Relationships**    | How tables are connected to each other. Allows for type-safe joins in ZQL.    |
| **Permissions**      | Compile-time only. Define once - never worry about data access control again. |

The Zero schema combines these three aspects to:

1. Provide typesafety for ZQL queries
2. Define first-class relationships between tables
3. Define permissions for access control

<Note
  type="note"
  slug="generating"
  heading="You do not need to define the Zero schema by hand"
>
  [Community-contributed converters](./generators) exist for Prisma and Drizzle
  that generate the tables and relationships. While these generators make it
  easy to get started, understanding how Zero schemas work is valuable for: -
  Debugging type and relationship issues - Understanding how Zero maps your data
  model - Customizing generated schemas when needed - Troubleshooting permission
  and access control problems
</Note>

## Schema Usage

The Zero schema is used in three key places:

| Location                 | Description                                                                      | Use Case                                                                                                                                                                                         |
| ------------------------ | -------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Zero Client**          | Required when initializing a Zero client instance (i.e. inside a React provider) | Provides type safety and relationship information for queries and mutations                                                                                                                      |
| **Zero Cache**           | Used by the `zero-cache` server to validate and process client requests          | Ensures data consistency and proper relationship handling                                                                                                                                        |
| **Permissions Deployer** | Used when deploying permissions using `npx zero-deploy-permissions`              | Validates and applies permission changes when:<br/>- The core database schema has been modified<br/>- Only the permissions schema has been changed<br/>- You need to update existing permissions |

In all cases, the schema file location is specified using the `ZERO_SCHEMA_PATH` environment variable.

## Defining the Zero Schema

The Zero schema is encoded in a TypeScript file that is conventionally called `schema.ts` file. For example, see [the schema file for`hello-zero`](https://github.com/rocicorp/hello-zero/blob/main/src/schema.ts).

### Tables & Relationships

Use `createSchema` to define the entire Zero schema:

```tsx
import {createSchema} from '@rocicorp/zero';
import {definePermissions} from '@rocicorp/zero';

export const schema = createSchema({
  tables: [user, medium, message],
  relationships: [userRelationships, mediumRelationships, messageRelationships],
});
```

### Permissions

Use `definePermissions` to define the permissions for your schema.

```tsx
// co-located in schema.ts. Only used at compile time, not at runtime.
export const permissions = definePermissions<AuthData, Schema>(schema, () => {
  return {
    user: {
      select: [allowIfAuthenticated], // soon to be replaced by custom queries
      // insert: // DEPRECATED: replaced by custom mutators
      // update: // DEPRECATED: replaced by custom mutators
      // delete: // DEPRECATED: replaced by custom mutators
    },
  };
});
```

<Note
  type="note"
  slug="permissions-schema-deprecation"
  heading="Permission definitions in schema.ts will soon be deprecated"
>
  As of today, the only permissions you should define inside the schema.ts are
  read permissions (like `select: [allowIfAuthenticated]`). Mutation permissions
  are now handled by [custom mutators](/docs/custom-mutators).
</Note>

## Schema Changes and Migrations

For information about how Zero handles schema changes and migrations, see the [Schema Migrations](/docs/schema/migrations) documentation.
